<!-- [ Main Content ] start -->
<section class="pcoded-main-container">
    <div class="pcoded-wrapper">
        <div class="pcoded-content">
            <div class="pcoded-inner-content">
                <div class="main-body">
                    <div class="page-wrapper">
                        <!-- [ breadcrumb ] start -->
                        <div class="page-header">
                            <div class="page-block">
                                <div class="row align-items-center">
                                    <div class="col-md-12">
                                        <div class="page-header-title">
                                            <h5 class="m-b-10">Add Book</h5>
                                        </div>
                                        <ul class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="/books"><i class="feather icon-home"></i></a></li>
                                            <li class="breadcrumb-item"><a href="/books">Book List</a></li>
                                            <li class="breadcrumb-item"><a href="#!">Add Book</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- [ breadcrumb ] end -->
                        <!-- [ Main Content ] start -->
                        <div class="row">
                            <!-- [ task-list ] start -->
                            <div class="col-sm-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Add Book</h5>
										
                                    </div>
                                    <div class="card-body task-data">
                                        <% if (errors?._general && errors._general[0]) { %>
                                            <div class="alert alert-danger"><%= errors._general[0] %></div>
                                        <% } %>
                                        <!-- Add: POST to /books. Edit: POST to /books/:id -->
										<form id="<%= action === 'add' ? 'addBookForm' : 'editBookForm' %>" action="<%= action === 'add' ? '/books' : '/books/' + (old && old.id) %>" method="POST" enctype="multipart/form-data">
											<input type="hidden" name="id" value="<%= old?.id || '' %>">
											<div class="form-group row">
												<label for="bookImage" class="col-sm-3 col-form-label">Book Image</label>
												<div class="col-sm-6">
                                                    <% if (action === 'add') { %>
                                                        <input type="file" class="form-control-file" id="bookImage" name="book_image" accept=".jpg,.jpeg,.png,image/jpeg,image/jpg,image/png" required>
                                                    <% } else { %>
                                                        <input type="file" class="form-control-file" id="bookImage" name="book_image" accept=".jpg,.jpeg,.png,image/jpeg,image/jpg,image/png">
                                                    <% } %>
													<input type="file" class="form-control-file" id="bookImage" name="book_image" accept=".jpg,.jpeg,.png,image/jpeg,image/jpg,image/png">
													<small class="form-text text-muted">Allowed: JPEG, JPG, PNG. Max size: 2MB.</small>
													<span class="text-danger" id="bookImageError"><%= errors?.book_image ? errors.book_image[0] : '' %></span>
													<% if (action === 'edit' && old?.file) { %>
													<div class="mt-2"><small class="text-muted">Current image is set. Choose a new file only to replace it.</small></div>
													<% } %>
												</div>
											</div>
											<div class="form-group row">
												<label for="bookName" class="col-sm-3 col-form-label">Book Name</label>
												<div class="col-sm-6">
													<input type="text" class="form-control" id="bookName" placeholder="Book Name" name="book_name" value="<%= old?.book_name || '' %>" data-rule-mandatory>
                                                    <span class="text-danger"><%= errors?.book_name ? errors.book_name[0] : '' %></span>
												</div>
											</div>
											<div class="form-group row">
												<label for="authorName" class="col-sm-3 col-form-label">Author Name</label>
												<div class="col-sm-6">
													<input type="text" class="form-control" id="authorName" placeholder="Author Name" name="author_name" value="<%= old?.author_name || '' %>" data-rule-mandatory>
                                                    <span class="text-danger"><%= errors?.author_name ? errors.author_name[0] : '' %></span>
												</div>
											</div>
											<div class="form-group row">
												<label for="inputISBN" class="col-sm-3 col-form-label">ISBN</label>
												<div class="col-sm-6">
													<input type="number" class="form-control" id="inputISBN" placeholder="ISBN" name="isbn" value="<%= old?.isbn || '' %>" data-rule-digit>
                                                    <span class="text-danger"><%= errors?.isbn ? errors.isbn[0] : '' %></span>
												</div>
											</div>
											<div class="form-group row">
												<div class="col-sm-9 text-right">
													<button type="submit" class="btn btn-primary" id="bookSubmitBtn"><%= action === 'add' ? 'Save' : 'Update' %></button>
													<button type="button" class="btn btn-danger" id="bookCancelBtn" data-href="/books">Cancel</button>
												</div>
											</div>
										</form>
                                            
								   </div>
                                </div>
                            </div>
                            <!-- [ task-list ] end -->
                        </div>
                        <!-- [ Main Content ] end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- [ Main Content ] end -->

<script src="/assets/js/add-book-form.js"></script>
